(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72851278"],{"0418":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"header"},[e("div",{staticClass:"secheader bg-primary"},[e("div",{staticClass:"container"},[e("div",{staticClass:"row align-items-center py-1"},[t._m(0),e("div",{staticClass:"col-md-6 text-right userlink d-flex justify-content-around justify-content-md-end"},[null===t.userEmail?e("router-link",{staticClass:"text-light p-2",attrs:{to:"/customer_login"}},[e("i",{staticClass:"fas fa-user mr-1"}),t._v("會員登入 ")]):e("div",{staticClass:"d-flex align-items-center"},[e("a",{staticClass:"m-0 text-light mr-2 dropdown-toggle",attrs:{href:"#","data-toggle":"dropdown","data-reference":"parent"}},[t._v("您好 "+t._s(t.userEmail))]),e("div",{staticClass:"dropdown-menu"},[e("router-link",{staticClass:"dropdown-item",attrs:{to:"history_order"}},[t._v("查詢訂單")]),e("a",{staticClass:"dropdown-item",attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.signOut(a)}}},[t._v("會員登出")])],1)]),e("router-link",{staticClass:"text-light p-2 mr-3",attrs:{to:"/admin_login"}},[e("i",{staticClass:"fas fa-user-cog mr-1"}),t._v("管理員登入 ")])],1)])])]),e("div",{staticClass:"mainheader container"},[e("nav",{staticClass:"navbar navbar-expand-lg navbar-light"},[e("h1",{staticClass:"m-0"},[e("router-link",{staticClass:"navbar-brand title mr-4",attrs:{to:"/"}},[e("i",{staticClass:"fab fa-bootstrap text-primary mr-2"}),t._v("boo售票網 ")])],1),e("div",{staticClass:"d-lg-none ml-auto mr-3 cart-lg"},[e("a",{staticClass:"align-middle",attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.loginCheck(a)}}},[e("i",{staticClass:"fas fa-shopping-cart"})])]),t._m(1),e("div",{staticClass:"collapse navbar-collapse ",attrs:{id:"navbarNav"}},[e("ul",{staticClass:"navbar-nav"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{"active-class":"active","focus-class":"focus",to:"/product_music"}},[e("i",{staticClass:"fas fa-music"}),t._v("音樂")])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{"active-class":"active","focus-class":"focus",to:"/product_drama"}},[e("i",{staticClass:"fas fa-theater-masks"}),t._v("戲劇")])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{"active-class":"active","focus-class":"focus",to:"/product_sport"}},[e("i",{staticClass:"fas fa-basketball-ball"}),t._v("運動")])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{"active-class":"active","focus-class":"focus",to:"/product_expo"}},[e("i",{staticClass:"fas fa-palette"}),t._v("展覽")])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{"active-class":"active","focus-class":"focus",to:"/product_concert"}},[e("i",{staticClass:"fas fa-microphone-alt"}),t._v("演唱會")])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{"active-class":"active","focus-class":"focus",to:"/product_movie"}},[e("i",{staticClass:"fas fa-video"}),t._v("電影")])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{"active-class":"active","focus-class":"focus",to:"/product_family"}},[e("i",{staticClass:"fas fa-child"}),t._v("親子")])],1)])]),e("div",{staticClass:"cart"},[e("a",{attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.loginCheck(a)}}},[e("i",{staticClass:"fas fa-shopping-cart mr-1"}),t._v("購物車("+t._s(t.cartsLen)+") ")])])])])])},r=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-md-6 social-media"},[e("a",{staticClass:"text-light p-3",attrs:{href:""}},[e("i",{staticClass:"fab fa-instagram"})]),e("a",{staticClass:"text-light p-3",attrs:{href:""}},[e("i",{staticClass:"fab fa-facebook-square"})]),e("a",{staticClass:"text-light p-3",attrs:{href:""}},[e("i",{staticClass:"fab fa-line"})]),e("a",{staticClass:"text-light p-3",attrs:{href:"https://github.com/takeryang/booticket-SC"}},[e("i",{staticClass:"fab fa-github"})])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])}],i=(e("a9e3"),e("1276"),e("ac1f"),e("260b")),n=(e("1157"),{props:{cartsLen:Number},data:function(){return{userEmail:null,status:{online:!1},a:""}},methods:{signOut:function(){i["a"].auth().signOut().then((function(){console.log("success"),window.location.reload()})).catch((function(t){}))},userOnline:function(){i["a"].auth().onAuthStateChanged((function(t){if(null!==t){t.email;console.log(t)}else console.log("NO")}))},loginCheck:function(){null!==this.userEmail?this.$router.push("/customer_order"):(alert("請先登入會員"),this.$router.push("/customer_login"))},currentUser:function(){var t=this;i["a"].auth().onAuthStateChanged((function(a){a?t.userEmail=a.email.split("@")[0]:console.log(3)}))}},created:function(){this.currentUser()}}),c=n,o=e("2877"),l=Object(o["a"])(c,s,r,!1,null,null,null);a["a"]=l.exports},1276:function(t,a,e){"use strict";var s=e("d784"),r=e("44e7"),i=e("825a"),n=e("1d80"),c=e("4840"),o=e("8aa5"),l=e("50c4"),d=e("14c3"),u=e("9263"),m=e("9f7f"),v=m.UNSUPPORTED_Y,f=[].push,p=Math.min,h=4294967295;s("split",2,(function(t,a,e){var s;return s="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var s=String(n(this)),i=void 0===e?h:e>>>0;if(0===i)return[];if(void 0===t)return[s];if(!r(t))return a.call(s,t,i);var c,o,l,d=[],m=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,p=new RegExp(t.source,m+"g");while(c=u.call(p,s)){if(o=p.lastIndex,o>v&&(d.push(s.slice(v,c.index)),c.length>1&&c.index<s.length&&f.apply(d,c.slice(1)),l=c[0].length,v=o,d.length>=i))break;p.lastIndex===c.index&&p.lastIndex++}return v===s.length?!l&&p.test("")||d.push(""):d.push(s.slice(v)),d.length>i?d.slice(0,i):d}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)}:a,[function(a,e){var r=n(this),i=void 0==a?void 0:a[t];return void 0!==i?i.call(a,r,e):s.call(String(r),a,e)},function(t,r){var n=e(s,t,this,r,s!==a);if(n.done)return n.value;var u=i(t),m=String(this),f=c(u,RegExp),g=u.unicode,_=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(v?"g":"y"),C=new f(v?"^(?:"+u.source+")":u,_),b=void 0===r?h:r>>>0;if(0===b)return[];if(0===m.length)return null===d(C,m)?[m]:[];var x=0,k=0,y=[];while(k<m.length){C.lastIndex=v?0:k;var w,N=d(C,v?m.slice(k):m);if(null===N||(w=p(l(C.lastIndex+(v?k:0)),m.length))===x)k=o(m,k,g);else{if(y.push(m.slice(x,k)),y.length===b)return y;for(var E=1;E<=N.length-1;E++)if(y.push(N[E]),y.length===b)return y;k=x=w}}return y.push(m.slice(x)),y}]}),v)},"1f86":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"customer-payorder"},[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("Header",{attrs:{"carts-len":t.cartsLen}}),e("div",{staticClass:"container order"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[t._m(0),e("table",{staticClass:"table"},[t._m(1),e("tbody",t._l(t.carts.carts,(function(a){return e("tr",{key:a.id},[e("td",{staticClass:"text-center align-middle"},[t._v(t._s(a.product.title)+" ")]),e("td",{staticClass:"text-center align-middle"},[t._v(t._s(a.qty))]),e("td",{staticClass:"text-right align-middle"},[t._v(t._s(a.total))]),e("td",{staticClass:"text-right"},[e("button",{staticClass:"btn btn-outline-danger ",on:{click:function(e){return t.removeCart(a.id)}}},[e("i",{staticClass:"far fa-trash-alt"})])])])})),0),e("tfoot",[e("tr",[e("td",{staticClass:"text-right font-weight-bold align-middle",attrs:{colspan:"2"}},[t._v("總計")]),e("td",{staticClass:"text-right font-weight-bold align-middle"},[t._v(t._s(t.carts.total))]),e("td")]),t.carts.total!==t.carts.final_total?e("tr",[e("td",{staticClass:"text-right text-success font-weight-bold align-middle",attrs:{colspan:"2"}},[t._v("折扣後")]),e("td",{staticClass:"text-right text-success font-weight-bold align-middle"},[t._v(t._s(t.carts.final_total))]),e("td")]):t._e()])]),e("div",{staticClass:"input-group mb-3 p-0"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code.code,expression:"coupon_code.code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon_code.code},on:{input:function(a){a.target.composing||t.$set(t.coupon_code,"code",a.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:t.addCouponCode}},[t._v("套用優惠碼")])])])]),e("div",{staticClass:"col-md-6"},[t._m(2),e("validation-observer",{scopedSlots:t._u([{key:"default",fn:function(a){var s=a.invalid;return[e("form",{on:{submit:function(a){return a.preventDefault(),t.createOrder(a)}}},[e("validation-provider",{attrs:{name:"電子郵件",rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("div",{staticClass:"form-group"},[e("label",{staticClass:"mb-1",attrs:{for:"useremail"}},[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control",class:r,attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email",disabled:""},domProps:{value:t.form.user.email},on:{input:function(a){a.target.composing||t.$set(t.form.user,"email",a.target.value)}}}),e("span",{staticClass:"invalid-feedback m-0"},[t._v(t._s(s[0]))])])]}}],null,!0)}),e("validation-provider",{attrs:{name:"姓名",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("div",{staticClass:"form-group"},[e("label",{staticClass:"mb-1",attrs:{for:"username"}},[t._v("訂購人姓名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],staticClass:"form-control",class:r,attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(a){a.target.composing||t.$set(t.form.user,"name",a.target.value)}}}),e("span",{staticClass:"invalid-feedback m-0"},[t._v(t._s(s[0]))])])]}}],null,!0)}),e("validation-provider",{attrs:{name:"電話",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("div",{staticClass:"form-group"},[e("label",{staticClass:"mb-1",attrs:{for:"usertel"}},[t._v("訂購人電話")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",class:r,attrs:{type:"tel",name:"usertel",id:"usertel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(a){a.target.composing||t.$set(t.form.user,"tel",a.target.value)}}}),e("span",{staticClass:"invalid-feedback m-0"},[t._v(t._s(s[0]))])])]}}],null,!0)}),e("validation-provider",{attrs:{name:"地址",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("div",{staticClass:"form-group"},[e("label",{staticClass:"mb-1",attrs:{for:"useraddress"}},[t._v("訂購人地址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],staticClass:"form-control",class:r,attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(a){a.target.composing||t.$set(t.form.user,"address",a.target.value)}}}),e("span",{staticClass:"invalid-feedback m-0"},[t._v(t._s(s[0]))])])]}}],null,!0)}),e("div",{staticClass:"order-title mb-3"},[e("p",[t._v("填寫付款資訊")])]),e("Card"),e("div",{staticClass:"text-right mb-5"},[e("button",{staticClass:"btn btn-danger",attrs:{disabled:s},on:{submit:function(a){return a.preventDefault(),t.createOrder(a)}}},[t._v("送出訂單")])])],1)]}}])})],1)])])],1)},r=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"order-title"},[e("p",[t._v("確認訂單")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{staticClass:"text-center"},[t._v("商品名稱")]),e("th",{staticClass:"text-center"},[t._v("數量")]),e("th",{staticClass:"text-right"},[t._v("小計")]),e("th",{staticClass:"text-right",attrs:{width:"100"}},[t._v("取消")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"order-title mb-3"},[e("p",[t._v("填寫訂購資訊")])])}],i=(e("99af"),e("1157")),n=e.n(i),c=e("0418"),o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card-form"},[e("div",{staticClass:"card-list"},[e("div",{staticClass:"card-item",class:{"-active":t.isCardFlipped}},[e("div",{staticClass:"card-item__side -front"},[e("div",{ref:"focusElement",staticClass:"card-item__focus",class:{"-active":t.focusElementStyle},style:t.focusElementStyle}),e("div",{staticClass:"card-item__cover"},[e("img",{staticClass:"card-item__bg",attrs:{src:"https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/"+t.currentCardBackground+".jpeg"}})]),e("div",{staticClass:"card-item__wrapper"},[e("div",{staticClass:"card-item__top"},[e("img",{staticClass:"card-item__chip",attrs:{src:"https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/chip.png"}}),e("div",{staticClass:"card-item__type"},[e("transition",{attrs:{name:"slide-fade-up"}},[t.getCardType?e("img",{key:t.getCardType,staticClass:"card-item__typeImg",attrs:{src:"https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/"+t.getCardType+".png",alt:""}}):t._e()])],1)]),e("label",{ref:"cardNumber",staticClass:"card-item__number",attrs:{for:"cardNumber"}},["amex"===t.getCardType?t._l(t.amexCardMask,(function(a,s){return e("span",{key:s},[e("transition",{attrs:{name:"slide-fade-up"}},[s>4&&s<14&&t.cardNumber.length>s&&""!==a.trim()?e("div",{staticClass:"card-item__numberItem"},[t._v("*")]):t.cardNumber.length>s?e("div",{key:s,staticClass:"card-item__numberItem",class:{"-active":""===a.trim()}},[t._v(" "+t._s(t.cardNumber[s])+" ")]):e("div",{key:s+1,staticClass:"card-item__numberItem",class:{"-active":""===a.trim()}},[t._v(t._s(a))])])],1)})):t._l(t.otherCardMask,(function(a,s){return e("span",{key:s},[e("transition",{attrs:{name:"slide-fade-up"}},[s>4&&s<15&&t.cardNumber.length>s&&""!==a.trim()?e("div",{staticClass:"card-item__numberItem"},[t._v("*")]):t.cardNumber.length>s?e("div",{key:s,staticClass:"card-item__numberItem",class:{"-active":""===a.trim()}},[t._v(" "+t._s(t.cardNumber[s])+" ")]):e("div",{key:s+1,staticClass:"card-item__numberItem",class:{"-active":""===a.trim()}},[t._v(t._s(a))])])],1)}))],2),e("div",{staticClass:"card-item__content"},[e("label",{ref:"cardName",staticClass:"card-item__info",attrs:{for:"cardName"}},[e("div",{staticClass:"card-item__holder"},[t._v("持卡人姓名")]),e("transition",{attrs:{name:"slide-fade-up"}},[t.cardName.length?e("div",{key:"1",staticClass:"card-item__name"},[e("transition-group",{attrs:{name:"slide-fade-right"}},t._l(t.cardName.replace(/\s\s+/g," "),(function(a,s){return s===s?e("span",{key:s+1,staticClass:"card-item__nameItem"},[t._v(t._s(a))]):t._e()})),0)],1):e("div",{key:"2",staticClass:"card-item__name"},[t._v("Full Name")])])],1),e("div",{ref:"cardDate",staticClass:"card-item__date"},[e("label",{staticClass:"card-item__dateTitle",attrs:{for:"cardMonth"}},[t._v("Expires")]),e("label",{staticClass:"card-item__dateItem",attrs:{for:"cardMonth"}},[e("transition",{attrs:{name:"slide-fade-up"}},[t.cardMonth?e("span",{key:t.cardMonth},[t._v(t._s(t.cardMonth))]):e("span",{key:"2"},[t._v("MM")])])],1),t._v(" / "),e("label",{staticClass:"card-item__dateItem",attrs:{for:"cardYear"}},[e("transition",{attrs:{name:"slide-fade-up"}},[t.cardYear?e("span",{key:t.cardYear},[t._v(t._s(String(t.cardYear).slice(2,4)))]):e("span",{key:"2"},[t._v("YY")])])],1)])])])]),e("div",{staticClass:"card-item__side -back"},[e("div",{staticClass:"card-item__cover"},[e("img",{staticClass:"card-item__bg",attrs:{src:"https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/"+t.currentCardBackground+".jpeg"}})]),e("div",{staticClass:"card-item__band"}),e("div",{staticClass:"card-item__cvv"},[e("div",{staticClass:"card-item__cvvTitle"},[t._v("CVV")]),e("div",{staticClass:"card-item__cvvBand"},t._l(t.cardCvv,(function(a,s){return e("span",{key:s},[t._v(" * ")])})),0),e("div",{staticClass:"card-item__type"},[t.getCardType?e("img",{staticClass:"card-item__typeImg",attrs:{src:"https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/"+t.getCardType+".png"}}):t._e()])])])])]),e("div",{staticClass:"card-form__inner"},[e("validation-observer",{scopedSlots:t._u([{key:"default",fn:function(a){a.invalid;return[e("validation-provider",{attrs:{name:"信用卡號",rules:"required|min:19"},scopedSlots:t._u([{key:"default",fn:function(a){a.errors;var s=a.classes;return[e("div",{staticClass:"card-input"},[e("label",{attrs:{for:"cardNumber"}},[t._v("信用卡號")]),e("input",{directives:[{name:"mask",rawName:"v-mask",value:t.generateCardNumberMask,expression:"generateCardNumberMask"},{name:"model",rawName:"v-model",value:t.cardNumber,expression:"cardNumber"}],staticClass:"form-control",class:s,attrs:{type:"text",id:"cardNumber","data-ref":"cardNumber",autocomplete:"off"},domProps:{value:t.cardNumber},on:{focus:t.focusInput,blur:t.blurInput,input:function(a){a.target.composing||(t.cardNumber=a.target.value)}}})])]}}],null,!0)}),e("validation-provider",{attrs:{name:"持卡人姓名",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("div",{staticClass:"card-input"},[e("label",{attrs:{for:"cardName"}},[t._v("持卡人姓名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.cardName,expression:"cardName"}],staticClass:"form-control",class:r,attrs:{type:"text",id:"cardName","data-ref":"cardName",autocomplete:"off"},domProps:{value:t.cardName},on:{focus:t.focusInput,blur:t.blurInput,input:function(a){a.target.composing||(t.cardName=a.target.value)}}}),e("span",{staticClass:"invalid-feedback m-0"},[t._v(t._s(s[0]))])])]}}],null,!0)}),e("div",{staticClass:"card-form__row"},[e("div",{staticClass:"card-form__col"},[e("div",{staticClass:"card-form__group"},[e("label",{staticClass:"w-100",attrs:{for:"cardMonth"}},[t._v("有效期限")]),e("validation-provider",{staticClass:"w-48 mr-2",attrs:{name:"有效期限月份",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("select",{directives:[{name:"model",rawName:"v-model",value:t.cardMonth,expression:"cardMonth"}],staticClass:"form-control -select",class:r,attrs:{id:"cardMonth","data-ref":"cardDate"},on:{focus:t.focusInput,blur:t.blurInput,change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.cardMonth=a.target.multiple?e:e[0]}}},[e("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Month")]),t._l(12,(function(a){return e("option",{key:a,attrs:{disabled:a<t.minCardMonth},domProps:{value:a<10?"0"+a:a}},[t._v(" "+t._s(a<10?"0"+a:a)+" ")])}))],2),e("span",{staticClass:"invalid-feedback m-0"},[t._v(t._s(s[0]))])]}}],null,!0)}),e("validation-provider",{staticClass:"w-48",attrs:{name:"有效期限年份",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("select",{directives:[{name:"model",rawName:"v-model",value:t.cardYear,expression:"cardYear"}],staticClass:"form-control -select",class:r,attrs:{id:"cardYear","data-ref":"cardDate"},on:{focus:t.focusInput,blur:t.blurInput,change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.cardYear=a.target.multiple?e:e[0]}}},[e("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Year")]),t._l(12,(function(a,s){return e("option",{key:a,domProps:{value:s+t.minCardYear}},[t._v(" "+t._s(s+t.minCardYear)+" ")])}))],2),e("span",{staticClass:"invalid-feedback m-0"},[t._v(t._s(s[0]))])]}}],null,!0)})],1)]),e("div",{staticClass:"card-form__col -cvv"},[e("validation-provider",{attrs:{name:"信用卡安全碼",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("div",{staticClass:"card-input"},[e("label",{attrs:{for:"cardCvv"}},[t._v("信用卡安全碼")]),e("input",{directives:[{name:"mask",rawName:"v-mask",value:"####",expression:"'####'"},{name:"model",rawName:"v-model",value:t.cardCvv,expression:"cardCvv"}],staticClass:"form-control",class:r,attrs:{type:"text",id:"cardCvv",maxlength:"3",autocomplete:"off"},domProps:{value:t.cardCvv},on:{focus:function(a){return t.flipCard(!0)},blur:function(a){return t.flipCard(!1)},input:function(a){a.target.composing||(t.cardCvv=a.target.value)}}}),e("span",{staticClass:"invalid-feedback m-0"},[t._v(t._s(s[0]))])])]}}],null,!0)})],1)])]}}])})],1)])])])},l=[],d=(e("4d63"),e("ac1f"),e("25f0"),e("466d"),{data:function(){return{currentCardBackground:Math.floor(25*Math.random()+1),cardName:"",cardNumber:"",cardMonth:"",cardYear:"",cardCvv:"",minCardYear:(new Date).getFullYear(),amexCardMask:"#### ###### #####",otherCardMask:"#### #### #### ####",cardNumberTemp:"",isCardFlipped:!1,focusElementStyle:null,isInputFocused:!1}},computed:{getCardType:function(){var t=this.cardNumber,a=new RegExp("^4");return null!=t.match(a)?"visa":(a=new RegExp("^(34|37)"),null!=t.match(a)?"amex":(a=new RegExp("^5[1-5]"),null!=t.match(a)?"mastercard":(a=new RegExp("^6011"),null!=t.match(a)?"discover":(a=new RegExp("^9792"),null!=t.match(a)?"troy":"visa"))))},generateCardNumberMask:function(){return"amex"===this.getCardType?this.amexCardMask:this.otherCardMask},minCardMonth:function(){return this.cardYear===this.minCardYear?(new Date).getMonth()+1:1}},watch:{cardYear:function(){this.cardMonth<this.minCardMonth&&(this.cardMonth="")}},methods:{flipCard:function(t){this.isCardFlipped=t},focusInput:function(t){this.isInputFocused=!0;var a=t.target.dataset.ref,e=this.$refs[a];this.focusElementStyle={width:"".concat(e.offsetWidth,"px"),height:"".concat(e.offsetHeight,"px"),transform:"translateX(".concat(e.offsetLeft,"px) translateY(").concat(e.offsetTop,"px)")}},blurInput:function(){var t=this;setTimeout((function(){t.isInputFocused||(t.focusElementStyle=null)}),300),t.isInputFocused=!1}}}),u=d,m=e("2877"),v=Object(m["a"])(u,o,l,!1,null,null,null),f=v.exports,p=e("260b"),h={components:{Header:c["a"],Card:f},data:function(){return{products:[],product:{},carts:{},status:{loadingItem:""},isLoading:!1,coupon_code:{code:""},form:{user:{name:"",email:"",tel:"",address:""},message:""},forms:{creditCard:"",dateCard:"",password:""},cartsLen:0}},methods:{getProduct:function(t){var a=this,e="".concat("https://vue-course-api.hexschool.io/","api/").concat("user001","/product/").concat(t);this.status.loadingItem=t,this.$http.get(e).then((function(t){a.product=t.data.product,n()("#productModal").modal("show"),a.status.loadingItem=""}))},addtoCart:function(t){var a=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s="".concat("https://vue-course-api.hexschool.io/","api/").concat("user001","/cart");this.status.loadingItem=t;var r={product_id:t,qty:e};this.$http.post(s,{data:r}).then((function(t){a.status.loadingItem="",a.getCart(),n()("#productModal").modal("hide")}))},getCart:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io/","api/").concat("user001","/cart");this.isLoading=!0,this.$http.get(a).then((function(a){t.carts=a.data.data,t.cartsLen=a.data.data.carts.length,t.isLoading=!1}))},removeCart:function(t){var a=this,e="".concat("https://vue-course-api.hexschool.io/","api/").concat("user001","/cart/").concat(t);this.isLoading=!0,this.$http.delete(e).then((function(t){a.getCart()}))},addCouponCode:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io/","api/").concat("user001","/coupon");this.isLoading=!0,this.$http.post(a,{data:this.coupon_code}).then((function(a){a.data.success?(t.getCart(),t.isLoading=!1,t.coupon_code.code=""):(alert(a.data.message),t.getCart(),t.isLoading=!1,t.coupon_code.code="")}))},createOrder:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io/","api/").concat("user001","/order");this.cartsLen>0&&(this.isLoading=!0,this.$http.post(a,{data:this.form}).then((function(a){a.data.success&&t.$router.push("customer_checkout/".concat(a.data.orderId)),t.isLoading=!1,t.carts={}})))},currentUser:function(){var t=this;p["a"].auth().onAuthStateChanged((function(a){a&&(t.form.user.email=a.email)}))}},created:function(){this.getCart(),this.currentUser()}},g=h,_=Object(m["a"])(g,s,r,!1,null,null,null);a["default"]=_.exports},"25f0":function(t,a,e){"use strict";var s=e("6eeb"),r=e("825a"),i=e("d039"),n=e("ad6d"),c="toString",o=RegExp.prototype,l=o[c],d=i((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),u=l.name!=c;(d||u)&&s(RegExp.prototype,c,(function(){var t=r(this),a=String(t.source),e=t.flags,s=String(void 0===e&&t instanceof RegExp&&!("flags"in o)?n.call(t):e);return"/"+a+"/"+s}),{unsafe:!0})},"44e7":function(t,a,e){var s=e("861d"),r=e("c6b6"),i=e("b622"),n=i("match");t.exports=function(t){var a;return s(t)&&(void 0!==(a=t[n])?!!a:"RegExp"==r(t))}},"466d":function(t,a,e){"use strict";var s=e("d784"),r=e("825a"),i=e("50c4"),n=e("1d80"),c=e("8aa5"),o=e("14c3");s("match",1,(function(t,a,e){return[function(a){var e=n(this),s=void 0==a?void 0:a[t];return void 0!==s?s.call(a,e):new RegExp(a)[t](String(e))},function(t){var s=e(a,t,this);if(s.done)return s.value;var n=r(t),l=String(this);if(!n.global)return o(n,l);var d=n.unicode;n.lastIndex=0;var u,m=[],v=0;while(null!==(u=o(n,l))){var f=String(u[0]);m[v]=f,""===f&&(n.lastIndex=c(l,i(n.lastIndex),d)),v++}return 0===v?null:m}]}))},"4d63":function(t,a,e){var s=e("83ab"),r=e("da84"),i=e("94ca"),n=e("7156"),c=e("9bf2").f,o=e("241c").f,l=e("44e7"),d=e("ad6d"),u=e("9f7f"),m=e("6eeb"),v=e("d039"),f=e("69f3").enforce,p=e("2626"),h=e("b622"),g=h("match"),_=r.RegExp,C=_.prototype,b=/a/g,x=/a/g,k=new _(b)!==b,y=u.UNSUPPORTED_Y,w=s&&i("RegExp",!k||y||v((function(){return x[g]=!1,_(b)!=b||_(x)==x||"/a/i"!=_(b,"i")})));if(w){var N=function(t,a){var e,s=this instanceof N,r=l(t),i=void 0===a;if(!s&&r&&t.constructor===N&&i)return t;k?r&&!i&&(t=t.source):t instanceof N&&(i&&(a=d.call(t)),t=t.source),y&&(e=!!a&&a.indexOf("y")>-1,e&&(a=a.replace(/y/g,"")));var c=n(k?new _(t,a):_(t,a),s?this:C,N);if(y&&e){var o=f(c);o.sticky=!0}return c},E=function(t){t in N||c(N,t,{configurable:!0,get:function(){return _[t]},set:function(a){_[t]=a}})},I=o(_),M=0;while(I.length>M)E(I[M++]);C.constructor=N,N.prototype=C,m(r,"RegExp",N)}p("RegExp")},8418:function(t,a,e){"use strict";var s=e("c04e"),r=e("9bf2"),i=e("5c6c");t.exports=function(t,a,e){var n=s(a);n in t?r.f(t,n,i(0,e)):t[n]=e}},"99af":function(t,a,e){"use strict";var s=e("23e7"),r=e("d039"),i=e("e8b5"),n=e("861d"),c=e("7b0b"),o=e("50c4"),l=e("8418"),d=e("65f0"),u=e("1dde"),m=e("b622"),v=e("2d00"),f=m("isConcatSpreadable"),p=9007199254740991,h="Maximum allowed index exceeded",g=v>=51||!r((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),_=u("concat"),C=function(t){if(!n(t))return!1;var a=t[f];return void 0!==a?!!a:i(t)},b=!g||!_;s({target:"Array",proto:!0,forced:b},{concat:function(t){var a,e,s,r,i,n=c(this),u=d(n,0),m=0;for(a=-1,s=arguments.length;a<s;a++)if(i=-1===a?n:arguments[a],C(i)){if(r=o(i.length),m+r>p)throw TypeError(h);for(e=0;e<r;e++,m++)e in i&&l(u,m,i[e])}else{if(m>=p)throw TypeError(h);l(u,m++,i)}return u.length=m,u}})}}]);
//# sourceMappingURL=chunk-72851278.b32c2f46.js.map